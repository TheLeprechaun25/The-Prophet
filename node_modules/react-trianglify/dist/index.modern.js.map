{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["import React, { useCallback, useMemo, useRef, useEffect, useState } from 'react'\nimport trianglify from 'trianglify'\n\nfunction Trianglify ({\n  output = 'canvas',\n  width = 600,\n  height = 400,\n  ...props\n}) {\n  const ref = useRef()\n  const [, forceUpdate] = useState({})\n  const svgOutput = useCallback((generateOutput) => {\n    generateOutput(ref.current)\n  }, [])\n\n  const canvasOutput = useCallback((generateOutput) => {\n    const canvas = generateOutput()\n    const ctx = ref.current.getContext('2d')\n    ctx.drawImage(canvas,0, 0, width, height)\n  }, [])\n\n  const choosenOutput = useMemo(() => ({\n    canvas: {\n      output: 'toCanvas',\n      method: canvasOutput,\n    },\n    svg: {\n      output: 'toSVG',\n      method: svgOutput,\n    },\n  }), [])\n\n  useEffect(() => {\n    const pattern = trianglify({\n      width,\n      height,\n      ...props,\n    })\n\n    const generateOutput = pattern[choosenOutput[output].output]\n\n    if (!generateOutput) {\n      throw new Error('Invalid output. Only \"canvas\" or \"svg\" are allowed.')\n    }\n\n    const outputMethod = choosenOutput[output].method(generateOutput)\n\n    forceUpdate({})\n  }, [])\n\n  const Tag = output\n  return <Tag ref={ref} width={width} height={height} />\n}\n\nexport default Trianglify\n"],"names":["Trianglify","output","width","height","props","ref","useRef","useState","forceUpdate","svgOutput","useCallback","generateOutput","current","canvasOutput","canvas","ctx","getContext","drawImage","choosenOutput","useMemo","method","svg","useEffect","pattern","trianglify","Error","outputMethod","Tag"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,SAASA,UAAT,OAKG;AAAA,yBAJDC,MAIC;AAAA,MAJDA,MAIC,4BAJQ,QAIR;AAAA,wBAHDC,KAGC;AAAA,MAHDA,KAGC,2BAHO,GAGP;AAAA,yBAFDC,MAEC;AAAA,MAFDA,MAEC,4BAFQ,GAER;AAAA,MADEC,KACF;;AACD,MAAMC,GAAG,GAAGC,MAAM,EAAlB;;AADC,kBAEuBC,QAAQ,CAAC,EAAD,CAF/B;AAAA,MAEQC,WAFR;;AAGD,MAAMC,SAAS,GAAGC,WAAW,CAAC,UAACC,cAAD,EAAoB;AAChDA,IAAAA,cAAc,CAACN,GAAG,CAACO,OAAL,CAAd;AACD,GAF4B,EAE1B,EAF0B,CAA7B;AAIA,MAAMC,YAAY,GAAGH,WAAW,CAAC,UAACC,cAAD,EAAoB;AACnD,QAAMG,MAAM,GAAGH,cAAc,EAA7B;AACA,QAAMI,GAAG,GAAGV,GAAG,CAACO,OAAJ,CAAYI,UAAZ,CAAuB,IAAvB,CAAZ;AACAD,IAAAA,GAAG,CAACE,SAAJ,CAAcH,MAAd,EAAqB,CAArB,EAAwB,CAAxB,EAA2BZ,KAA3B,EAAkCC,MAAlC;AACD,GAJ+B,EAI7B,EAJ6B,CAAhC;AAMA,MAAMe,aAAa,GAAGC,OAAO,CAAC;AAAA,WAAO;AACnCL,MAAAA,MAAM,EAAE;AACNb,QAAAA,MAAM,EAAE,UADF;AAENmB,QAAAA,MAAM,EAAEP;AAFF,OAD2B;AAKnCQ,MAAAA,GAAG,EAAE;AACHpB,QAAAA,MAAM,EAAE,OADL;AAEHmB,QAAAA,MAAM,EAAEX;AAFL;AAL8B,KAAP;AAAA,GAAD,EASzB,EATyB,CAA7B;AAWAa,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMC,OAAO,GAAGC,UAAU;AACxBtB,MAAAA,KAAK,EAALA,KADwB;AAExBC,MAAAA,MAAM,EAANA;AAFwB,OAGrBC,KAHqB,EAA1B;AAMA,QAAMO,cAAc,GAAGY,OAAO,CAACL,aAAa,CAACjB,MAAD,CAAb,CAAsBA,MAAvB,CAA9B;;AAEA,QAAI,CAACU,cAAL,EAAqB;AACnB,YAAM,IAAIc,KAAJ,CAAU,qDAAV,CAAN;AACD;;AAED,QAAMC,YAAY,GAAGR,aAAa,CAACjB,MAAD,CAAb,CAAsBmB,MAAtB,CAA6BT,cAA7B,CAArB;AAEAH,IAAAA,WAAW,CAAC,EAAD,CAAX;AACD,GAhBQ,EAgBN,EAhBM,CAAT;AAkBA,MAAMmB,GAAG,GAAG1B,MAAZ;AACA,sBAAO,oBAAC,GAAD;AAAK,IAAA,GAAG,EAAEI,GAAV;AAAe,IAAA,KAAK,EAAEH,KAAtB;AAA6B,IAAA,MAAM,EAAEC;AAArC,IAAP;AACD;;;;"}